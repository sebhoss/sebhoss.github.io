<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="author" content="Sebastian Hoß">
  <meta name="subject" content="Software Engineering">
  <meta name="description" content="WIP articles about software engineering">

  <meta property="og:title" content="Sebastian Hoß: SSH & Multiplexing" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://seb.hoß.de/ssh-multiplexing" />
  <meta property="og:image" content="https://seb.hoß.deimages/alseki-logo.jpg" />
  <meta property="og:description" content="WIP articles about software engineering" />

  <title>Sebastian Hoß: SSH & Multiplexing</title>

  <link rel="canonical" href="https://seb.hoß.de/ssh-multiplexing" />

  <link rel="alternate" type="application/atom+xml" title="Sebastian Hoß: Latest Posts and Updates" href="/atom.xml">
  <link rel="alternate" type="application/rss+xml" title="Sebastian Hoß: Latest Posts and Updates" href="/rss.xml">

  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">
  <link rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">

  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/font.css">
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/layout-min900px.css" media="screen and (min-width: 900px)">
  <link rel="stylesheet" href="/css/layout-min1200px.css" media="screen and (min-width: 1200px)">
  <link rel="stylesheet" href="/css/navigation.css">
  <link rel="stylesheet" href="/css/navigation-min1200px.css" media="screen and (min-width: 1200px)">
  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/license.css">
  <link rel="stylesheet" href="/css/license-min1200px.css" media="screen and (min-width: 1200px)">
  <link rel="stylesheet" href="/css/post.css">
  <link rel="stylesheet" href="/css/post-min1200px.css" media="screen and (min-width: 1200px)">
  <link rel="stylesheet" href="/css/syntax.css">
</head>
<body id="site">

  <header id="header">
    <h1 id="authorname">
      <a href="/" id="rootlink" class="h-card" title="get me back to root">Sebastian Hoß</a>
      <a href="/sitemap" title="show me all articles" class="sitemap">
        <img src="/images/sitemap.svg" alt="sitemap" height="30" width="30">
      </a>
    </h1>

    <span id="actions">
      <a href="/public-key" id="key" title="show me your keys">
        <img src="/images/key.svg" alt="key" height="30" width="32" style="transform:rotate(90deg);">
      </a>
      <a href="mailto:mail@shoss.de" id="email" title="i want to write you an email">
        <img src="/images/envelope-o.svg" alt="envelope" height="32" width="32">
      </a>
      <a href="https://github.com/sebhoss/" id="github" title="want some code?">
        <img src="/images/github.svg" alt="github" height="32" width="32">
      </a>
      <a href="https://twitter.com/sebhoss" id="twitter" title="peep peep peep">
        <img src="/images/twitter.svg" alt="twitter" height="32" width="32">
      </a>
      <a href="/oss-release-calendar" id="schedule" title="when is the next release?">
        <img src="/images/calendar.svg" alt="twitter" height="32" width="32">
      </a>
      <a href="/resume" id="resume" title="need some help?">
        <img src="/images/graduation-cap.svg" alt="graduation-cap" height="32" width="32">
      </a>
      <a href="/atom.xml" id="newsfeed" title="get notified about updates">
        <img src="/images/rss.svg" alt="newsfeed" height="32" width="32">
      </a>
      <a href="https://www.google.com/cse/publicurl?cx=004384174486689999226:9k2cdrrglds" id="search" title="search on this site">
        <img src="/images/search.svg" alt="newsfeed" height="32" width="32">
      </a>
    </span>
  </header>

  <main id="content">
    <article id="post" class="h-entry">
  <header id="postHeader">
    <h1 class="p-name">
      <a href="/ssh-multiplexing" class="u-url">SSH & Multiplexing</a>
      <a href="https://github.com/sebhoss/sebhoss.github.io/edit/source/_posts/2016-03-26-ssh-multiplexing.asciidoc" title="edit article" class="icon">
        <img src="/images/pencil.svg" alt="Edit article" height="16" width="14" class="icon">
      </a>
      <a href="https://github.com/sebhoss/sebhoss.github.io/commits/source/_posts/2016-03-26-ssh-multiplexing.asciidoc" title="view history" class="icon">
        <img src="/images/history.svg" alt="View article history" height="16" width="14" class="icon">
      </a>
    </h1>
    <span class="tag" rel="tag"> talks about: SSH and Multiplexing</span>
    <time pubdate datetime="2016-07-02 00:00:00 +0000" id="pubdate" class="dt-published">published: 02 Jul 2016</time>
  </header>

  <div class="e-content">
    <div class="paragraph">
<p>In order to run a local development version of some software against a remotely available database or similar infrastructure, consider using SSH multiplexing<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup> and a <code>Makefile</code>.<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnote_2" title="View footnote.">2</a>]</sup></p>
</div>
<div class="paragraph">
<p>The following example first opens a SSH tunnel to a server called 'dev-server-01' using a control socket, runs a piece of code (Spring based microservice<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnote_3" title="View footnote.">3</a>]</sup>) against it and finally closes the SSH tunnel once the developer has stopped code execution.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>run-against-dev-server-01:
  ssh -f -N -M -S ~/.ssh/controlmasters/run-against-dev-server-01 dev-server-01
  -mvn spring-boot:run -Dspring.profiles.active=development,local-with-dev-server-01
  ssh -O "exit" -S ~/.ssh/controlmasters/run-against-dev-server-01 dev-server-01</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>-f</code> to put SSH in the background &#8594; required if you want keep using your terminal, like on a CI server.</p>
</div>
<div class="paragraph">
<p><code>-N</code> to tell SSH not to run anything once the connection is open. Since we only open the connection in order to tunnel ports, we need this to work around the error SSH throws once it connects (complaining that no command was specified to run).</p>
</div>
<div class="paragraph">
<p><code>-M</code> to tell SHH to open a multiplexed connection controlled by a socket specified with <code>-S</code>.</p>
</div>
<div class="paragraph">
<p><code>-O "exit"</code> tells SSH to exit the master connection controlled by the specified control socket.</p>
</div>
<div class="paragraph">
<p>In order to run all this, simple execute <code>make run-against-dev-server-01</code>.</p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. <a href="https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing" class="bare">https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing</a>
</div>
<div class="footnote" id="_footnote_2">
<a href="#_footnoteref_2">2</a>. <a href="https://en.wikipedia.org/wiki/Makefile" class="bare">https://en.wikipedia.org/wiki/Makefile</a>
</div>
<div class="footnote" id="_footnote_3">
<a href="#_footnoteref_3">3</a>. <a href="http://projects.spring.io/spring-boot/" class="bare">http://projects.spring.io/spring-boot/</a>
</div>
</div>
  </div>

  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "about": {
        "@type": "Thing",
        "name": "SSH and Multiplexing"
      },
      "accountablePerson": {
        "@id": "#sebhoss",
        "@type": "Person",
        "name": "Sebastian Hoß",
        "url": "https://seb.hoß.de",
        "email": "mail@shoss.de"
      },
      "audience": {
        "@type": "Audience",
        "audienceType": "software developers",
        "name": "monkeys"
      },
      "author": {
        "@id": "#sebhoss"
      },
      "creator": {
        "@id": "#sebhoss"
      },
      "dateModified": "2016-07-02 00:00:00 +0000",
      "datePublished": "2016-01-02",
      "editor": {
        "@id": "#sebhoss"
      },
      "publisher": {
        "@type": "Organization",
        "name": "metio.wtf",
        "url": "http://metio.wtf/",
        "email": "whatsup@metio.wtf",
        "logo": {
          "@type": "ImageObject",
          "url": "https://seb.hoß.de/images/alseki-logo.png",
          "height": 60,
          "width": 60
        },
        "founder": {
          "@id": "#sebhoss"
        }
      },
      "fileFormat": "text/html",
      "keywords": "software, development, project, management",
      "license": "https://creativecommons.org/publicdomain/zero/1.0/",
      "name": "SSH & Multiplexing",
      "headline": "SSH & Multiplexing",
      "mainEntityOfPage": "https://seb.hoß.de/ssh-multiplexing",
      "url": "https://seb.hoß.de/ssh-multiplexing",
      "image": {
        "@type": "ImageObject",
        "contentUrl": "https://seb.hoß.de/images/alseki.png",
        "url": "https://seb.hoß.de/images/alseki.png",
        "height": 696,
        "width": 696,
        "author": "Sebastian Hoß",
        "datePublished": "2016-01-02",
        "dateModified": "2016-01-02",
        "name": "website logo"
      }
    }
  </script>
</article>

  </main>

  <nav id="navigation">
    <ul class="latestPosts">
    
      <li>
        <a href="/clojure-java-interoperability">Clojure Java Interoperability</a>
        <span class="tag" rel="tag">Clojure, Java, and Interoperability</span>
      </li>
    
      <li>
        <a href="/eclipse-settings-shared">Eclipse & sharing settings with Maven, CI servers and your team</a>
        <span class="tag" rel="tag">Eclipse, settings, Maven, and CI</span>
      </li>
    
      <li>
        <a href="/git-cheat-sheet">Git Cheat Sheet</a>
        <span class="tag" rel="tag">Git</span>
      </li>
    
      <li>
        <a href="/resume">Resumé</a>
        <span class="tag" rel="tag">curriculum vitae and resumé</span>
      </li>
    
      <li>
        <a href="/ssh-multiplexing">SSH & Multiplexing</a>
        <span class="tag" rel="tag">SSH and Multiplexing</span>
      </li>
    
      <li>
        <a href="/static-axon-event-upcasting">Axon Framework & static event upcasting</a>
        <span class="tag" rel="tag">Axon, Event Sourcing, and Upcasting</span>
      </li>
    
      <li>
        <a href="/software-licensing">Software Licensing</a>
        <span class="tag" rel="tag">Software and License</span>
      </li>
    
      <li>
        <a href="/oss-release-calendar">OSS Release Calendar</a>
        <span class="tag" rel="tag">Open Source, Software, Release, Calendar, and Schedule</span>
      </li>
    
      <li>
        <a href="/public-key">Public Key</a>
        <span class="tag" rel="tag">Public Key, Cryptography, and Security</span>
      </li>
    
      <li>
        <a href="/bliki-jekyll-post-dates">bliki & updating Jekyll post dates</a>
        <span class="tag" rel="tag">bliki, Jekyll, dates, Git, and hooks</span>
      </li>
    
    </ul>
  </nav>

  <footer id="license">
    <div class="license">
      <p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#">
        <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">
          <img src="/images/cc0.png" style="border-style: none;" alt="CC0" width="88px" height="31px" />
        </a><br />
        To the extent possible under law,
        <a rel="dct:publisher" href="https://seb.hoß.de">
          <span property="dct:title">Sebastian Hoß</span>
        </a>
        has waived all copyright and related or neighboring rights to
        <span property="dct:title">seb.hoß.de</span>.
        This work is published from:
        <span property="vcard:Country" datatype="dct:ISO3166" content="EN" about="https://seb.hoß.de">
          Germany
        </span>
      </p>
    </div>
  </footer>

  <script type="application/ld+json" src="/assets/person-ld.json"></script>
  <script type="application/ld+json" src="/assets/site-ld.json"></script>

</body>
</html>
